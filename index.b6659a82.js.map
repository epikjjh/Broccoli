{"mappings":"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","sources":["<anon>","app.js"],"sourcesContent":["const $6b17f08f738443dc$var$NEWS_URL = 'https://api.hnpwa.com/v0/news/{page}.json';\nconst $6b17f08f738443dc$var$CONTENT_URL = 'https://api.hnpwa.com/v0/item/{id}.json';\nconst $6b17f08f738443dc$var$pageInfo = {\n    currentPage: 1,\n    minPage: 1,\n    maxPage: 10\n};\n// Only call loadNews if we're in a browser environment\nif (typeof window !== 'undefined') {\n    const rootElement = document.getElementById('root');\n    if (rootElement) {\n        window.addEventListener('hashchange', ()=>$6b17f08f738443dc$export$ed538151afd19dee(rootElement));\n        $6b17f08f738443dc$export$4bb3ff9d4e0b170e(rootElement);\n    }\n}\nfunction $6b17f08f738443dc$export$ed538151afd19dee(rootElementParam) {\n    // Use passed element or try to find it in DOM\n    const rootElement = rootElementParam || document.getElementById('root');\n    if (!rootElement) throw new Error('Root element not found');\n    if (location.hash === '' || location.hash === '#prevPage' || location.hash === '#nextPage') {\n        location.hash = '';\n        $6b17f08f738443dc$export$4bb3ff9d4e0b170e(rootElementParam);\n    } else if (location.hash.startsWith('#item')) $6b17f08f738443dc$export$ff48cb68e9510fa6(rootElementParam);\n    else {\n        rootElement.innerHTML = 'Error: Invalid route';\n        console.error('Invalid hash:', location.hash);\n    }\n}\nasync function $6b17f08f738443dc$export$4bb3ff9d4e0b170e(rootElementParam) {\n    // Use passed element or try to find it in DOM\n    const rootElement = rootElementParam || document.getElementById('root');\n    if (!rootElement) throw new Error('Root element not found');\n    const currentPage = $6b17f08f738443dc$var$pageInfo.currentPage;\n    let newsFeedList = [];\n    let template = `\n    <ul class=\"news-feed mx-auto p-4\">\n      {{newsFeed}}\n    </ul>\n    <button class=\"prev-btn mx-auto my-4 bg-blue-500 text-white px-4 py-2 rounded-md\">Previous Page</button>\n    <span class=\"page-info text-center my-4 text-sm text-gray-500 px-4 py-2\">Page ${currentPage} of ${$6b17f08f738443dc$var$pageInfo.maxPage}</span>\n    <button class=\"next-btn mx-auto my-4 bg-blue-500 text-white px-4 py-2 rounded-md\">Next Page</button>\n  `;\n    try {\n        $6b17f08f738443dc$export$3ac708362c1f96eb(rootElement, true);\n        const response = await fetch($6b17f08f738443dc$var$NEWS_URL.replace('{page}', currentPage));\n        const newsFeed = await response.json();\n        newsFeed.forEach((item)=>{\n            newsFeedList.push(`<li class=\"item my-2 p-2 rounded-md\">\n          <a href=\"#item=${item.id}\">\n            ${item.title} (${item.comments_count})\n          </a>\n        </li>`);\n        });\n        rootElement.innerHTML = template.replace('{{newsFeed}}', newsFeedList.join(''));\n    } catch (error) {\n        console.error('Error:', error);\n        rootElement.innerHTML = `Error loading news feed: ${error.message || 'Unknown error'}`;\n    }\n    const prevPageButton = rootElement.querySelector('.prev-btn');\n    const nextPageButton = rootElement.querySelector('.next-btn');\n    if (currentPage > $6b17f08f738443dc$var$pageInfo.minPage) prevPageButton.addEventListener('click', ()=>{\n        $6b17f08f738443dc$var$pageInfo.currentPage = currentPage - 1;\n        location.hash = '#prevPage';\n    });\n    else prevPageButton.remove();\n    if (currentPage < $6b17f08f738443dc$var$pageInfo.maxPage) nextPageButton.addEventListener('click', ()=>{\n        $6b17f08f738443dc$var$pageInfo.currentPage = currentPage + 1;\n        location.hash = '#nextPage';\n    });\n    else nextPageButton.remove();\n}\nasync function $6b17f08f738443dc$export$ff48cb68e9510fa6(rootElementParam) {\n    // Use passed element or try to find it in DOM\n    const rootElement = rootElementParam || document.getElementById('root');\n    if (!rootElement) throw new Error('Root element not found');\n    // Extract newsId from the hash\n    const newsId = location.hash.startsWith('#item=') ? location.hash.substring(6) : null;\n    if (!newsId) throw new Error('Invalid news ID format');\n    let template = `\n    <div class=\"container mx-auto p-4 max-w-4xl\">\n      <button class=\"back-btn bg-blue-500 text-white px-4 py-2 rounded-md mb-4\">\\u{2190} Back to News</button>\n      <h1 class=\"text-2xl font-bold mb-4\">{{title}}</h1>\n      {{url}}\n      <h2 class=\"text-xl font-bold mb-4\">Comments:</h2>\n      <ul class=\"comments-container\">\n        {{comments}}\n      </ul>\n    </div>\n  `;\n    try {\n        $6b17f08f738443dc$export$3ac708362c1f96eb(rootElement, true);\n        // Fetch the item details\n        const response = await fetch($6b17f08f738443dc$var$CONTENT_URL.replace('{id}', newsId));\n        const content = await response.json();\n        template = template.replace('{{title}}', content.title);\n        template = template.replace('{{url}}', content.url ? `<p class=\"mb-4 text-m text-gray-500\"><a href=\"${content.url}\" target=\"_blank\">Visit Story</a></p>` : '');\n        rootElement.innerHTML = template.replace('{{comments}}', content.comments.length > 0 ? $6b17f08f738443dc$var$makeCommentTree(content.comments) : '<p class=\"text-m text-gray-500\">No comments yet</p>');\n    } catch (error) {\n        console.error('Error:', error);\n        rootElement.innerHTML = `Error loading content: ${error.message || 'Unknown error'}`;\n    }\n    const backButton = rootElement.querySelector('.back-btn');\n    backButton.addEventListener('click', ()=>{\n        location.hash = '';\n    });\n}\nfunction $6b17f08f738443dc$var$makeCommentTree(comments, depth = 0) {\n    const commentTree = [];\n    comments.forEach((comment)=>{\n        commentTree.push(`\n      <div style=\"padding-left: ${depth * 20}px;\" class=\"comment my-6 bg-gray-50 p-2 rounded-lg\">\n       <div class=\"text-sm text-gray-500 mb-2 flex items-center gap-2\">\n            <span class=\"font-medium\">${comment.user || 'Anonymous'}</span>\n            <span class=\"text-gray-300\">\\u{2022}</span>\n            <span>${new Date(comment.time * 1000).toLocaleString()}</span>\n          </div>\n          <div class=\"prose prose-sm\">\n            ${comment.content}\n          </div> \n      </div>\n    `);\n        if (comment.comments.length > 0) commentTree.push($6b17f08f738443dc$var$makeCommentTree(comment.comments, depth + 1));\n    });\n    return commentTree.join('');\n}\nfunction $6b17f08f738443dc$export$3ac708362c1f96eb(rootElement, isLoading) {\n    if (isLoading) rootElement.innerHTML = 'Loading...';\n}\n\n\n//# sourceMappingURL=index.b6659a82.js.map\n","const NEWS_URL = 'https://api.hnpwa.com/v0/news/{page}.json';\nconst CONTENT_URL = 'https://api.hnpwa.com/v0/item/{id}.json';\nconst pageInfo = {\n  currentPage: 1,\n  minPage: 1,\n  maxPage: 10,\n}\n\nexport { loadNewsFeed, loadNewsMaterial, routePage, setLoading };\n\n// Only call loadNews if we're in a browser environment\nif (typeof window !== 'undefined') {\n  const rootElement = document.getElementById('root');\n  if (rootElement) {\n    window.addEventListener('hashchange', () => routePage(rootElement));\n    loadNewsFeed(rootElement);\n  }\n}\n\nfunction routePage(rootElementParam) {\n  // Use passed element or try to find it in DOM\n  const rootElement = rootElementParam || document.getElementById('root');\n  if (!rootElement) {\n    throw new Error('Root element not found');\n  }\n\n  if (location.hash === '' || location.hash === '#prevPage' || location.hash === '#nextPage') {\n    location.hash = '';\n    loadNewsFeed(rootElementParam);\n  } else if (location.hash.startsWith('#item')) {\n    loadNewsMaterial(rootElementParam);\n  } else {\n    rootElement.innerHTML = 'Error: Invalid route';\n    console.error('Invalid hash:', location.hash);  \n  }\n}\n\nasync function loadNewsFeed(rootElementParam) {\n  // Use passed element or try to find it in DOM\n  const rootElement = rootElementParam || document.getElementById('root');\n  if (!rootElement) {\n    throw new Error('Root element not found');\n  }\n\n  const currentPage = pageInfo.currentPage;\n  let newsFeedList = [];\n  let template = `\n    <ul class=\"news-feed mx-auto p-4\">\n      {{newsFeed}}\n    </ul>\n    <button class=\"prev-btn mx-auto my-4 bg-blue-500 text-white px-4 py-2 rounded-md\">Previous Page</button>\n    <span class=\"page-info text-center my-4 text-sm text-gray-500 px-4 py-2\">Page ${currentPage} of ${pageInfo.maxPage}</span>\n    <button class=\"next-btn mx-auto my-4 bg-blue-500 text-white px-4 py-2 rounded-md\">Next Page</button>\n  `\n\n  try {\n    setLoading(rootElement, true);\n    \n    const response = await fetch(NEWS_URL.replace('{page}', currentPage));\n    const newsFeed = await response.json();\n    \n    newsFeed.forEach(item => {\n      newsFeedList.push(\n        `<li class=\"item my-2 p-2 rounded-md\">\n          <a href=\"#item=${item.id}\">\n            ${item.title} (${item.comments_count})\n          </a>\n        </li>`\n      );\n    });\n    \n    rootElement.innerHTML = template.replace('{{newsFeed}}', newsFeedList.join(''));\n  } catch (error) {\n    console.error('Error:', error);\n    rootElement.innerHTML = `Error loading news feed: ${error.message || 'Unknown error'}`;\n   }\n\n  const prevPageButton = rootElement.querySelector('.prev-btn');\n  const nextPageButton = rootElement.querySelector('.next-btn');\n\n  if (currentPage > pageInfo.minPage) {\n    prevPageButton.addEventListener('click', () => {\n      pageInfo.currentPage = currentPage - 1;\n      location.hash = '#prevPage';\n    });\n  } else {\n    prevPageButton.remove();\n  }\n\n  if (currentPage < pageInfo.maxPage) {\n    nextPageButton.addEventListener('click', () => {\n      pageInfo.currentPage = currentPage + 1;\n      location.hash = '#nextPage';\n    });\n  } else {\n    nextPageButton.remove();\n  }\n}\n\nasync function loadNewsMaterial(rootElementParam) {\n   // Use passed element or try to find it in DOM\n  const rootElement = rootElementParam || document.getElementById('root');\n  if (!rootElement) {\n    throw new Error('Root element not found');\n  }\n\n  // Extract newsId from the hash\n  const newsId = location.hash.startsWith('#item=') \n    ? location.hash.substring(6)\n    : null;\n  if (!newsId) {\n    throw new Error('Invalid news ID format');\n  }\n\n  let template = `\n    <div class=\"container mx-auto p-4 max-w-4xl\">\n      <button class=\"back-btn bg-blue-500 text-white px-4 py-2 rounded-md mb-4\">← Back to News</button>\n      <h1 class=\"text-2xl font-bold mb-4\">{{title}}</h1>\n      {{url}}\n      <h2 class=\"text-xl font-bold mb-4\">Comments:</h2>\n      <ul class=\"comments-container\">\n        {{comments}}\n      </ul>\n    </div>\n  `\n  \n  try {\n    setLoading(rootElement, true); \n    // Fetch the item details\n    const response = await fetch(CONTENT_URL.replace('{id}', newsId));\n    const content = await response.json();\n\n    template = template.replace('{{title}}', content.title);\n    template = template.replace('{{url}}', content.url ? `<p class=\"mb-4 text-m text-gray-500\"><a href=\"${content.url}\" target=\"_blank\">Visit Story</a></p>` : '');\n    rootElement.innerHTML = template.replace('{{comments}}', content.comments.length > 0 ? \n      makeCommentTree(content.comments) : '<p class=\"text-m text-gray-500\">No comments yet</p>'\n    );\n  } catch (error) {\n    console.error('Error:', error);\n    rootElement.innerHTML = `Error loading content: ${error.message || 'Unknown error'}`;\n  }\n\n  const backButton = rootElement.querySelector('.back-btn');\n  backButton.addEventListener('click', () => {\n    location.hash = '';\n  });\n}\n\nfunction makeCommentTree(comments, depth = 0) {\n  const commentTree = [];\n  comments.forEach(comment => {\n    commentTree.push(`\n      <div style=\"padding-left: ${depth * 20}px;\" class=\"comment my-6 bg-gray-50 p-2 rounded-lg\">\n       <div class=\"text-sm text-gray-500 mb-2 flex items-center gap-2\">\n            <span class=\"font-medium\">${comment.user || 'Anonymous'}</span>\n            <span class=\"text-gray-300\">•</span>\n            <span>${new Date(comment.time * 1000).toLocaleString()}</span>\n          </div>\n          <div class=\"prose prose-sm\">\n            ${comment.content}\n          </div> \n      </div>\n    `);\n    if (comment.comments.length > 0) {\n      commentTree.push(makeCommentTree(comment.comments, depth + 1));\n    }\n  });\n  return commentTree.join('');\n}\n\nfunction setLoading(rootElement, isLoading) {\n  if (isLoading) {\n    rootElement.innerHTML = 'Loading...';\n  }\n}\n"],"names":["$6b17f08f738443dc$var$pageInfo","currentPage","minPage","maxPage","window","rootElement","document","getElementById","addEventListener","$6b17f08f738443dc$export$ed538151afd19dee","rootElementParam","Error","location","hash","$6b17f08f738443dc$export$4bb3ff9d4e0b170e","startsWith","$6b17f08f738443dc$export$ff48cb68e9510fa6","innerHTML","console","error","newsFeedList","template","$6b17f08f738443dc$export$3ac708362c1f96eb","response","fetch","$6b17f08f738443dc$var$NEWS_URL","replace","newsFeed","json","forEach","item","push","id","title","comments_count","join","message","prevPageButton","querySelector","nextPageButton","remove","newsId","substring","$6b17f08f738443dc$var$CONTENT_URL","content","url","comments","length","$6b17f08f738443dc$var$makeCommentTree","depth","commentTree","comment","user","Date","time","toLocaleString","backButton","isLoading","NEWS_URL","CONTENT_URL","pageInfo","loadNewsFeed","loadNewsMaterial","routePage","setLoading","makeCommentTree"],"version":3,"file":"index.b6659a82.js.map"}